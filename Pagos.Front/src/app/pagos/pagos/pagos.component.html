<div class="container">
  <div fxLayout="row" fxLayoutAlign="space-around start" style="margin-bottom: 1rem">
    <mat-card style="width: 100%; height: 100%">
      <mat-card-content>
        <form [formGroup]="searchForm" novalidate>
          <div fxLayout="row" fxLayoutAlign="space-between center">
            <mat-form-field appearance="outline" class="margin-top" style="width: 40%">
              <mat-label translate>Número Documento</mat-label>
              <input matInput formControlName="numeroDocumento"/>
            </mat-form-field>
            <mat-form-field appearance="outline" style="width: 40%">
              <mat-label translate>Compañias</mat-label>
              <mat-select formControlName="company">
                <mat-option *ngFor="let list of listEntidades" [value]="list.id">
                  {{ list.name }}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <button
              mat-raised-button
              color="primary"
              (click)="buscar()"
              [disabled]="searchForm.invalid"
              class="botom-buscar">
              <mat-icon>search</mat-icon>
              <span translate>Buscar</span>
            </button>
          </div>
        </form>
      </mat-card-content>
    </mat-card>
  </div>
  <mat-card style="width: 100%">
    <div fxLayout="row" fxLayoutAlign="center center">
      <mat-form-field appearance="outline" class="input-filtrar" style="width: 100%">
        <mat-label>Filtrar</mat-label>
        <input matInput (keyup)="applyFilter($event)" #input/>
      </mat-form-field>
    </div>
    <div class="mat-elevation-z8">
      <table mat-table [dataSource]="dataSource" matSort>
        <ng-container matColumnDef="select">
          <th mat-header-cell *matHeaderCellDef>
            <mat-checkbox color="primary" [(ngModel)]="checked" (click)="allCheck()"></mat-checkbox>
          </th>
          <td mat-cell *matCellDef="let row; let i=index">
            <mat-checkbox color="primary" [(ngModel)]="row.checked" (change)=updateCheckedList($event,i)></mat-checkbox>
          </td>
        </ng-container>
        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>EMPRESA</th>
          <td mat-cell *matCellDef="let row; let i=index">{{ row.Empresa }}</td>
        </ng-container>
        <ng-container matColumnDef="numeroDocumento">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>NÚMERO DE DOCUMENTO</th>
          <td mat-cell *matCellDef="let row">{{ row.Documento }}</td>
        </ng-container>

        <ng-container matColumnDef="monto">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>MONTO</th>
          <td mat-cell *matCellDef="let row">{{ row.Monto | currency : 'USD' : 'symbol' : '1.0-0' }}</td>
        </ng-container>

        <ng-container matColumnDef="detalle">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>SALDO</th>
          <td mat-cell *matCellDef="let row">{{ row.Porcentaje | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
        </ng-container>

        <ng-container matColumnDef="action">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Acciones</th>
          <td mat-cell *matCellDef="let row">
            <button
              mat-raised-button
              color="primary"
              (click)="abrirPago(row)"
              class="botom-buscar"
              [disabled]="row.hasOwnProperty('checked') && row.checked"
            >
              <mat-icon>attach_money</mat-icon>
              <span translate>Pagar</span>
            </button>

          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="4">No se posee información</td>
        </tr>
      </table>
      <mat-card *ngIf="itsLoading" style="display: flex; justify-content: center; align-items: center">
        <mat-progress-spinner
          color="primary"
          mode="indeterminate">
        </mat-progress-spinner>
      </mat-card>
      <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
    </div>
    <div fxLayout="row" fxLayoutAlign="end center" style="margin-top: 1%">
      <button
        mat-raised-button
        color="primary"
        (click)="abrirPagoMultiple()"
        class="botom-buscar"
        [disabled]="listaCheckeada.length < 1"
      >
        <mat-icon>request_quote</mat-icon>
        <span translate>Pagos Multiples</span>
      </button>
    </div>
  </mat-card>
</div>
